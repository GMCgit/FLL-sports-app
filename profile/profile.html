<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" type="text/css" href="profile.css" />
  </head>

  <body>
    <div id="content">
      <nav id="navbar" class="navbar navbar-expand-lg navbar-light bg-light">
        <div id="username" class="navbar-brand"></div>
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <button class="nav-link btn" onclick="toMain()">Main</button>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="#"
                >My Profile <span class="sr-only">(current)</span></a
              >
            </li>
            <li class="nav-item">
              <button class="nav-link btn" onclick="toMap()">Map</button>
            </li>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="navbarDropdown"
                role="button"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                Other people
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="#">My friends</a>
                <a class="dropdown-item" href="#">Blocked people</a>
                <div class="dropdown-divider"></div>
                <div id="searchPeople">
                  <div class="form-inline my-2 my-lg-0">
                    <input
                      class="form-control mr-sm-2"
                      type="search"
                      placeholder="Search"
                      aria-label="Search"
                      id="userEntered"
                    />
                    <button
                      class="btn btn-outline-success my-2 my-sm-0"
                      onclick="searchPeople()"
                    >
                      Search
                    </button>
                  </div>
                </div>
                <div id="Results"></div>
              </div>
            </li>
          </ul>
        </div>
      </nav>
      <div id="profile">
        <div id="Username"></div>
        <div id="Name"></div>
        <form action="/action_page.php">
          <label for="phone">Optional options:</label>
          <label for="sport"> </label>
          <label for="scam"> </label>
          <input
            type="tel"
            id="phone"
            name="phone"
            placeholder="add phone number"
            pattern="[0-9]{3} [0-9]{3} [0-9]{3}"
          />
          <input
            type="tel"
            id="sport"
            name="sport"
            placeholder="add phaworeet sport"
          />
          <input
            type="tel"
            id="sport"
            name="scam"
            placeholder="add credit card number"
            pattern="[0-9]{4} [0-9]{4} [0-9]{4} [0-9]{4}"
          />
          <input type="submit" />
        </form>
        <button class="btn btn-primary" onclick="toEditProfile()">
          Edit profile
        </button>
        <button class="btn btn-outline-danger" onclick="signOut()">
          Sign out
        </button>
      </div>
    </div>

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />

    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>

    <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-analytics.js"></script>

    <script>
      let firebaseConfig = {
        apiKey: "AIzaSyCM2sEUC8IruO3FAd5AczvgxfqIUZ5ayoM",
        authDomain: "fll-sports-app.firebaseapp.com",
        databaseURL: "https://fll-sports-app.firebaseio.com",
        projectId: "fll-sports-app",
        storageBucket: "fll-sports-app.appspot.com",
        messagingSenderId: "984650261585",
        appId: "1:984650261585:web:75826e5684ec5ee71f8470",
        measurementId: "G-TH76ZB69PB",
      };

      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
    </script>

    <script>
      function searchPeople() {
        const searchTerm = document.getElementById("userEntered");

        let db = firebase.firestore();
        let users = [];

        db.collection("users")
          .get()
          .then((querySearch) => {
            querySearch.forEach((doc) => {
              let Username = doc.data().username;
              if (Username.startsWith(searchTerm.value)) {
                users.push({ username: Username, docId: doc.id });
              }
            });
          })
          .then(() => {
            document.getElementById("Results").innerHTML = "";
            for (i = 0; i < users.length; i++) {
              let child = document.createElement("button");
              child.innerHTML = users[i].username;
              child.classList.add("btn");
              child.classList.add("btn-outline-dark");
              child.classList.add("SearchResult");
              child.classList.add("btn-lg");
              document.getElementById("Results").appendChild(child);
            }
          });
      }
    </script>
    <style>
      .SearchResult {
        border: 1px solid black;
        border-radius: 5px;
        width: 60vw;
        height: 5vh;
        text-align: center;
        margin-left: calc((100vw - 60vw) / 2);
        margin-top: 10px;
        margin-bottom: 10px;
      }
    </style>

    <script src="./profile.js" defer></script>
  </body>
</html>
